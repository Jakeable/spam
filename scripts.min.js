function getUserHistory(){for(var e=$("#username").val(),a=0,t={},r="https://www.reddit.com/user/"+e+"/submitted.json?limit=100",n=null,o=!1;!o;)$.ajax({url:r+"&after="+n,async:!1,dataType:"json",success:function(e,r,s){console.log(s.responseText);for(var l=e.data.children,i=0;i<l.length;i++){var u=l[i].data.domain;console.log(u),a++,isNaN(t[u])?t[u]=1:t[u]=t[u]+1}var d;null!==e.data.after&&maxSubmissions>=a?(n=e.data.after,console.log(a)):(o=!0,d=7,null!==getQueryVariable("maxdomains")&&(d=getQueryVariable("maxdomains")));var m=1,b=Object.keys(t).map(function(e){return[e,t[e]]});b.sort(function(e,a){return a[1]-e[1]});for(var y=Math.min(b.length,d),c=0;y>c;c++){var g=b[c];if($("#historyTable tbody").append("<tr><td>"+g[0]+"</td><td>"+g[1]+"</td><td>"+round(100*(g[1]/a),2)+"%</td></tr>"),m++,m>d){b=null,e=null,t=null,m=1,$("#totalSubmissions").append(a);break}}}})}function round(e,a){return Number(Math.round(e+"e"+a)+"e-"+a)}function getQueryVariable(e){for(var a=window.location.search.substring(1),t=a.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");if(decodeURIComponent(n[0]).toLowerCase()==e.toLowerCase())return decodeURIComponent(n[1])}return null}var maxSubmissions=500;if($body=$("body"),null!==getQueryVariable("user")){var username=getQueryVariable("user");$("#username").val(username)}null!==getQueryVariable("max")&&(maxSubmissions=parseInt(getQueryVariable("max"))),$("#goButton").on("click",function(){$("#historyTable > tbody").empty(),$("#mediaTable > tbody").empty(),$body.addClass("loading");var e=$(this).button("loading");getUserHistory(),e.button("reset"),$body.removeClass("loading")});
